<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.finalproject.team4.shouldbe.mapper.ChatMapper">
    <select id="countUserChatRooms" resultType="int">
        SELECT COUNT(*)
        FROM chat_list
        WHERE from_id = #{userId} OR to_id = #{userId}
    </select>

    <select id="getCurrentUserChatRooms" resultType="ChatRoomVO">
        select *
        from chat_list
        where from_id = #{userId} or to_id = #{userId}
        ORDER BY last_time DESC
            LIMIT #{pvo.offsetPoint}, #{pvo.onePageRecord}
    </select>

    <select id="getMessagesByChatId" resultType="MessageVO">
        SELECT * FROM message
        WHERE chat_id = #{chatId}
        ORDER BY send_time
    </select>

    <select id="getProfileImg" resultType="String">
        SELECT profile_img FROM users WHERE user_id = #{userId}
    </select>
</mapper>
